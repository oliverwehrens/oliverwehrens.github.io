<!doctype html>









































<html
  class="not-ready lg:text-base"
  style="--bg: "
  lang="en-us"
>
  <head>
  <meta charset="utf-8" />
  <meta http-equiv="X-UA-Compatible" content="IE=edge" />
  <meta
    name="viewport"
    content="width=device-width, initial-scale=1, shrink-to-fit=no"
  />

  
  <title>How to detect if your server is down when making jQuery Ajax calls  - Oliver Wehrens</title>

  
  <meta name="theme-color" />

  
  
  
  
  <meta name="description" content="If you developed an ajax rich web application, maybe even a single page interface, you want to make sure that the user gets notified if the server is not reachable anymore. This happens either if the it goes down or the client loses its network connection. Depending on your code the application can run for a while and the user is confused about missing interactivity.
So how do you detect this?" />
  <meta name="author" content="Oliver Wehrens" />
  

  
  
  
  
  
  
  <link rel="preload stylesheet" as="style" href="https://oliverwehrens.github.io/main.min.css" />


  
  
  
  
  

  
  
  <link rel="preload" as="image" href="https://oliverwehrens.github.io/linkedin.svg" />
  
  <link rel="preload" as="image" href="https://oliverwehrens.github.io/bluesky.svg" />
  
  <link rel="preload" as="image" href="https://oliverwehrens.github.io/speakerdeck.svg" />
  
  <link rel="preload" as="image" href="https://oliverwehrens.github.io/rss.svg" />
  
  

  
  
  <script
    defer
    src="https://oliverwehrens.github.io/highlight.min.js"
    onload="hljs.initHighlightingOnLoad();"
  ></script>
  

  
  
  

  
  <link rel="icon" href="https://oliverwehrens.github.io/favicon.ico" />
  <link rel="apple-touch-icon" href="https://oliverwehrens.github.io/apple-touch-icon.png" />

  
  <meta name="generator" content="Hugo 0.124.1">

  
  
  
  
  
  <meta itemprop="name" content="How to detect if your server is down when making jQuery Ajax calls ">
<meta itemprop="description" content="If you developed an ajax rich web application, maybe even a single page interface, you want to make sure that the user gets notified if the server is not reachable anymore. This happens either if the it goes down or the client loses its network connection. Depending on your code the application can run for a while and the user is confused about missing interactivity.
So how do you detect this?"><meta itemprop="datePublished" content="2010-04-26T00:00:00+00:00" />
<meta itemprop="dateModified" content="2010-04-26T00:00:00+00:00" />
<meta itemprop="wordCount" content="390">
<meta itemprop="keywords" content="jQuery,Ajax,Javascript," />
  
  <meta property="og:title" content="How to detect if your server is down when making jQuery Ajax calls " />
<meta property="og:description" content="If you developed an ajax rich web application, maybe even a single page interface, you want to make sure that the user gets notified if the server is not reachable anymore. This happens either if the it goes down or the client loses its network connection. Depending on your code the application can run for a while and the user is confused about missing interactivity.
So how do you detect this?" />
<meta property="og:type" content="article" />
<meta property="og:url" content="https://oliverwehrens.github.io/how-to-detect-if-your-server-is-down-when-making-jquery-ajax-calls/" /><meta property="article:section" content="posts" />
<meta property="article:published_time" content="2010-04-26T00:00:00+00:00" />
<meta property="article:modified_time" content="2010-04-26T00:00:00+00:00" />

  
  <meta name="twitter:card" content="summary"/><meta name="twitter:title" content="How to detect if your server is down when making jQuery Ajax calls "/>
<meta name="twitter:description" content="If you developed an ajax rich web application, maybe even a single page interface, you want to make sure that the user gets notified if the server is not reachable anymore. This happens either if the it goes down or the client loses its network connection. Depending on your code the application can run for a while and the user is confused about missing interactivity.
So how do you detect this?"/>

  
  
  
  <link rel="canonical" href="https://oliverwehrens.github.io/how-to-detect-if-your-server-is-down-when-making-jquery-ajax-calls/" />
  
  
  <script defer data-domain="owehrens.com" src="https://plausible.io/js/script.js"></script>
  <script defer data-domain="owehrens.com" src="https://superpod.podpodgogo.com/js/script.js"></script>

</head>

  <body class="text-black duration-200 ease-out ">
    
<div class="mx-auto pt-2 flex flex-col justify-center items-center">
  <div>
      <a  href="https://oliverwehrens.github.io/">
       <img
        class="my-0 aspect-square  rounded-full "
        src="/img/oliver_square.jpg"
        alt="Oliver Wehrens"
      />
    </a>
    </div>

    <div class="p-8 text-xl font-serif">Seasoned Technology Leader. Mentor. Dad.</div>


    <div>
      
      <nav
        class="mt-5 flex justify-center space-x-10 items-center "
      >
        
        <a
          class="h-8 w-8 text-[0] [background:var(--url)_center_center/cover_no-repeat] lg:h-6 lg:w-6"
          style="--url: url(./linkedin.svg)"
          href="https://linkedin.com/in/oliverwehrens
          "
          target="_blank" 
          rel="me"
        >
          linkedin
        </a>
        
        <a
          class="h-8 w-8 text-[0] [background:var(--url)_center_center/cover_no-repeat] lg:h-6 lg:w-6"
          style="--url: url(./bluesky.svg)"
          href="https://bsky.app/profile/owehrensbsky.social"
          target="_blank" 
          rel="me"
        >
          bluesky
        </a>
        
        <a
          class="h-8 w-8 text-[0] [background:var(--url)_center_center/cover_no-repeat] lg:h-6 lg:w-6"
          style="--url: url(./speakerdeck.svg)"
          href="https://speakerdeck.com/owehrens
          "
          target="_blank" 
          rel="me"
        >
          speakerdeck
        </a>
        
        <a
          class="h-8 w-8 text-[0] [background:var(--url)_center_center/cover_no-repeat] lg:h-6 lg:w-6"
          style="--url: url(./rss.svg)"
          href="https://oliverwehrens.github.io/rss.xml "
          target="_blank" 
          rel="alternate"
        >
          rss
        </a>
        
      </nav>
      
    </div>

</div>  


    
  


    <main
      class="prose prose-neutral relative mx-auto min-h-[calc(100%-9rem)] max-w-3xl px-8 pb-16 pt-12"
    >
      

<article>
  <header class="mb-16">
    Oliver Wehrens
    <h1 class="!my-0 pb-2.5 article-title">How to detect if your server is down when making jQuery Ajax calls </h1>

    
    <div class="text-sm antialiased opacity-60">
      
      <time>Apr 26, 2010</time>
      
      
      
      
      <span class="text-gray">- 2 min</span>
    </div>
    
  </header>

  <section><p>If you developed an <!-- raw HTML omitted -->ajax rich web application<!-- raw HTML omitted -->, maybe even a single page interface, you want to make sure that the user gets <!-- raw HTML omitted -->notified<!-- raw HTML omitted --> if the server is <!-- raw HTML omitted -->not reachable<!-- raw HTML omitted --> anymore. This happens either if the it goes down or the client loses its network connection.
Depending on your code the application can run for a while and the <!-- raw HTML omitted -->user is confused<!-- raw HTML omitted --> about missing interactivity.</p>
<p>So how do you detect this? jQuery offers an error callback if something with the call goes wrong.</p>
<!-- raw HTML omitted -->
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-javascript" data-lang="javascript"><span style="display:flex;"><span>window.<span style="color:#a6e22e">setInterval</span>(<span style="color:#66d9ef">function</span>() {
</span></span><span style="display:flex;"><span><span style="color:#a6e22e">$</span>.<span style="color:#a6e22e">ajax</span>({
</span></span><span style="display:flex;"><span>   <span style="color:#a6e22e">type</span><span style="color:#f92672">:</span> <span style="color:#e6db74">&#39;GET&#39;</span>,
</span></span><span style="display:flex;"><span>      <span style="color:#a6e22e">url</span><span style="color:#f92672">:</span> <span style="color:#e6db74">&#39;http://www.myapp.com/heartbeat&#39;</span>,
</span></span><span style="display:flex;"><span>      <span style="color:#a6e22e">success</span><span style="color:#f92672">:</span> <span style="color:#66d9ef">function</span>(<span style="color:#a6e22e">data</span>, <span style="color:#a6e22e">textStatus</span>, <span style="color:#a6e22e">XMLHttpRequest</span>) {},
</span></span><span style="display:flex;"><span>      <span style="color:#a6e22e">error</span><span style="color:#f92672">:</span> <span style="color:#66d9ef">function</span>(<span style="color:#a6e22e">XMLHttpRequest</span>, <span style="color:#a6e22e">textStatus</span>, <span style="color:#a6e22e">errorThrown</span>) {
</span></span><span style="display:flex;"><span>        <span style="color:#a6e22e">alert</span>(<span style="color:#e6db74">&#39;Failure&#39;</span>);
</span></span><span style="display:flex;"><span>      }
</span></span><span style="display:flex;"><span>  });
</span></span><span style="display:flex;"><span>}, <span style="color:#ae81ff">2000</span>);
</span></span></code></pre></div><p>Unfortunately this does not work for a server which is down and if you are using a debugger like Firebug you will see that these calls have the status aborted. It turns out that if the <!-- raw HTML omitted -->server goes away<!-- raw HTML omitted --> jQuery will still execute the <!-- raw HTML omitted -->success callback<!-- raw HTML omitted -->. So how do you know that the server died?</p>
<p>I changed the response of the <!-- raw HTML omitted -->heartbeat<!-- raw HTML omitted --> query to contain some simple string like &lsquo;alive&rsquo;.  In the success callback I just check if the data contains this string. If it does not, I know that I do have a problem and I need to make sure that the user can&rsquo;t do anything anymore.</p>
<p>I use the <!-- raw HTML omitted -->jQuery plugin uiBlock<!-- raw HTML omitted --> to block every interaction and show a nice little message. Check out the <!-- raw HTML omitted -->uiBlock demos<!-- raw HTML omitted -->.</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-javascript" data-lang="javascript"><span style="display:flex;"><span><span style="color:#66d9ef">var</span> <span style="color:#a6e22e">uiBlocked</span> <span style="color:#f92672">=</span> <span style="color:#66d9ef">false</span>;
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>window.<span style="color:#a6e22e">setInterval</span>(<span style="color:#66d9ef">function</span>() {
</span></span><span style="display:flex;"><span>    <span style="color:#a6e22e">$</span>.<span style="color:#a6e22e">ajax</span>({
</span></span><span style="display:flex;"><span>      <span style="color:#a6e22e">cache</span><span style="color:#f92672">:</span> <span style="color:#66d9ef">false</span>,
</span></span><span style="display:flex;"><span>      <span style="color:#a6e22e">type</span><span style="color:#f92672">:</span> <span style="color:#e6db74">&#39;GET&#39;</span>,
</span></span><span style="display:flex;"><span>      <span style="color:#a6e22e">url</span><span style="color:#f92672">:</span> <span style="color:#e6db74">&#39;/mywebapp/alive.txt&#39;</span>,
</span></span><span style="display:flex;"><span>      <span style="color:#a6e22e">timeout</span><span style="color:#f92672">:</span> <span style="color:#ae81ff">1000</span>,
</span></span><span style="display:flex;"><span>      <span style="color:#a6e22e">success</span><span style="color:#f92672">:</span> <span style="color:#66d9ef">function</span>(<span style="color:#a6e22e">data</span>, <span style="color:#a6e22e">textStatus</span>, <span style="color:#a6e22e">XMLHttpRequest</span>) {
</span></span><span style="display:flex;"><span>        <span style="color:#66d9ef">if</span> (<span style="color:#a6e22e">data</span> <span style="color:#f92672">!=</span> <span style="color:#e6db74">&#39;alive&#39;</span>) {
</span></span><span style="display:flex;"><span>          <span style="color:#66d9ef">if</span> (<span style="color:#a6e22e">uiBlocked</span> <span style="color:#f92672">==</span> <span style="color:#66d9ef">false</span>) {
</span></span><span style="display:flex;"><span>            <span style="color:#a6e22e">uiBlocked</span> <span style="color:#f92672">=</span> <span style="color:#66d9ef">true</span>;
</span></span><span style="display:flex;"><span>            <span style="color:#a6e22e">$</span>.<span style="color:#a6e22e">blockUI</span>({
</span></span><span style="display:flex;"><span>              <span style="color:#a6e22e">message</span><span style="color:#f92672">:</span> <span style="color:#f92672">&amp;</span><span style="color:#a6e22e">quot</span>;<span style="color:#a6e22e">I</span><span style="color:#e6db74">&#39;m trying to connect to the server.&amp;quot;,
</span></span></span><span style="display:flex;"><span><span style="color:#e6db74">              css: {
</span></span></span><span style="display:flex;"><span><span style="color:#e6db74">                border: &#39;</span><span style="color:#a6e22e">none</span><span style="color:#e6db74">&#39;,
</span></span></span><span style="display:flex;"><span><span style="color:#e6db74">                padding: &#39;</span><span style="color:#ae81ff">15</span><span style="color:#a6e22e">px</span><span style="color:#e6db74">&#39;,
</span></span></span><span style="display:flex;"><span><span style="color:#e6db74">                backgroundColor: &#39;</span><span style="color:#960050;background-color:#1e0010">#</span><span style="color:#ae81ff">000</span><span style="color:#e6db74">&#39;,
</span></span></span><span style="display:flex;"><span><span style="color:#e6db74">                &#39;</span><span style="color:#f92672">-</span><span style="color:#a6e22e">webkit</span><span style="color:#f92672">-</span><span style="color:#a6e22e">border</span><span style="color:#f92672">-</span><span style="color:#a6e22e">radius</span><span style="color:#e6db74">&#39;: &#39;</span><span style="color:#ae81ff">10</span><span style="color:#a6e22e">px</span><span style="color:#e6db74">&#39;,
</span></span></span><span style="display:flex;"><span><span style="color:#e6db74">                &#39;</span><span style="color:#f92672">-</span><span style="color:#a6e22e">moz</span><span style="color:#f92672">-</span><span style="color:#a6e22e">border</span><span style="color:#f92672">-</span><span style="color:#a6e22e">radius</span><span style="color:#e6db74">&#39;: &#39;</span><span style="color:#ae81ff">10</span><span style="color:#a6e22e">px</span><span style="color:#e6db74">&#39;,
</span></span></span><span style="display:flex;"><span><span style="color:#e6db74">                opacity: .5,
</span></span></span><span style="display:flex;"><span><span style="color:#e6db74">                color: &#39;</span><span style="color:#960050;background-color:#1e0010">#</span><span style="color:#a6e22e">fff</span><span style="color:#960050;background-color:#1e0010">&#39;</span>
</span></span><span style="display:flex;"><span>              } });
</span></span><span style="display:flex;"><span>          }
</span></span><span style="display:flex;"><span>        } <span style="color:#66d9ef">else</span> {
</span></span><span style="display:flex;"><span>          <span style="color:#66d9ef">if</span> (<span style="color:#a6e22e">uiBlocked</span> <span style="color:#f92672">==</span> <span style="color:#66d9ef">true</span>) {
</span></span><span style="display:flex;"><span>            <span style="color:#a6e22e">uiBlocked</span> <span style="color:#f92672">=</span> <span style="color:#66d9ef">false</span>;
</span></span><span style="display:flex;"><span>            <span style="color:#a6e22e">$</span>.<span style="color:#a6e22e">unblockUI</span>();
</span></span><span style="display:flex;"><span>          }
</span></span><span style="display:flex;"><span>        }
</span></span><span style="display:flex;"><span>      }
</span></span><span style="display:flex;"><span>    })
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>  }, <span style="color:#ae81ff">2000</span>);
</span></span></code></pre></div><p>This code will check the server every 2 seconds and will<!-- raw HTML omitted --> block the UI<!-- raw HTML omitted --> when the server is not reachable and will <!-- raw HTML omitted -->come back up<!-- raw HTML omitted --> if the connection is <!-- raw HTML omitted -->alive<!-- raw HTML omitted --> again. Depending on your scenario (intranet/internet) you can change the interval for checking the connection.</p>
<p>This took me a couple of hours to get to this point and I thought it might be worth sharing. It seems a bit hacky but it works. What do you think?</p>
</section>



  
  
  <footer class="mt-12 flex flex-wrap">
     
    <a
      class="mb-1.5 mr-1.5 rounded-lg bg-black/[3%] px-5 py-1.5 no-underline dark:bg-white/[8%]"
      href="https://oliverwehrens.github.io/tags/jquery"
      >jQuery</a
    >
     
    <a
      class="mb-1.5 mr-1.5 rounded-lg bg-black/[3%] px-5 py-1.5 no-underline dark:bg-white/[8%]"
      href="https://oliverwehrens.github.io/tags/ajax"
      >Ajax</a
    >
     
    <a
      class="mb-1.5 mr-1.5 rounded-lg bg-black/[3%] px-5 py-1.5 no-underline dark:bg-white/[8%]"
      href="https://oliverwehrens.github.io/tags/javascript"
      >Javascript</a
    >
    
  </footer>
  

  
  
  
  
  <nav class="mt-24 flex rounded-lg bg-black/[3%] text-lg dark:bg-white/[8%]">
    
    <a
      class="flex w-1/2 items-center rounded-l-md p-6 pr-3 font-semibold no-underline hover:bg-black/[2%] dark:hover:bg-white/[3%]"
      href="https://oliverwehrens.github.io/busy-programmers-guide-on-where-to-buy-ebooks/"
      ><span class="mr-1.5">←</span><span>Busy Programmers Guide on where to buy eBooks</span></a
    >
    
    
    <a
      class="ml-auto flex w-1/2 items-center justify-end rounded-r-md p-6 pl-3 font-semibold no-underline hover:bg-black/[2%] dark:hover:bg-white/[3%]"
      href="https://oliverwehrens.github.io/lightweight-web-prototyping-for-the-framework-loving-java-developer/"
      ><span>Lightweight Web Prototyping for the Framework loving (Java) Developer</span><span class="ml-1.5">→</span></a
    >
    
  </nav>
  
  

  
  

  
  

  


  
</article>


    </main>

    
<div
class="nav-wrapper fixed inset-x-0 top-full z-40 flex h-full select-none flex-col justify-center pb-16 duration-200 dark:bg-black lg:static lg:h-auto lg:flex-row lg:!bg-transparent lg:pb-0 lg:transition-none"
>




</div>


<footer
  class="opaco mx-auto flex h-[4.5rem] max-w-3xl items-center px-8 text-[0.9em] opacity-60"
>

  <div class="mr-auto">
    &copy; 2009 - 2024
    <a class="link" href="https://oliverwehrens.github.io/">Oliver Wehrens</a>
  </div>

</footer>

  </body>
</html>
